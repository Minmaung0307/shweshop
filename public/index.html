<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ShweShop ‚Äî Mobile-first Store</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
    <!-- Replace client-id in production -->
    <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD" defer></script>
    <!-- Config (exports auth, db) -->
    <script type="module" src="./config.js"></script>
    <!-- App -->
    <script type="module" src="./app.js" defer></script>
  </head>
  <body>
    <!-- Topbar -->
    <header class="topbar">
      <div class="left">
        <div class="brand">ShweShop</div>
        <span id="greet" class="greet small"></span>
      </div>

      <!-- Desktop center search -->
      <div class="top-search">
        <input id="searchInput" class="input" placeholder="Search products‚Ä¶" aria-label="Search products" />
      </div>

      <div class="top-actions">
        <button id="btnCart" class="icon-btn badge" aria-label="Cart">
          üõí <span id="cartCount" class="badge-dot"></span>
        </button>
        <button id="btnAuth" class="icon-btn" title="Sign in">üë§</button>
        <button id="btnTheme" class="icon-btn" title="Theme">üåì</button>
        <div class="fs-switch">
          <button id="fsMinus" class="icon-btn" title="Smaller">A‚àí</button>
          <button id="fsPlus" class="icon-btn" title="Larger">A+</button>
        </div>
      </div>
    </header>

    <!-- Mobile second-line search -->
    <div class="top-search-row">
      <input id="searchInputMobile" class="input" placeholder="Search products‚Ä¶" aria-label="Search products mobile"/>
    </div>

    <!-- Horizontal nav-chips -->
    <nav id="navScroll" class="nav-scroll hscroll"></nav>

    <main id="main">
      <!-- Hero -->
      <section class="hero">
        <div>
          <h1>Find your favorites</h1>
          <p>Modern ‚Ä¢ Clean ‚Ä¢ Fast ‚Äî Mobile-first shopping</p>
        </div>
      </section>

      <!-- Category carousels + ads -->
      <section id="homeSections" class="home-sections"></section>

      <!-- Shop (search results show here at top of page) -->
      <section id="view-shop" class="view active">
        <h2 id="shopTitle" class="pad">Shop</h2>
        <div id="productGrid" class="grid"></div>
      </section>

      <!-- Analytics -->
      <section id="view-analytics" class="view">
        <div class="card">
          <div class="pad">
            <div class="row between">
              <div class="card-title">Sales Overview</div>
              <select id="anaRange" class="input" style="max-width:160px">
                <option value="30">Last 30 days</option>
                <option value="90">Last 90 days</option>
                <option value="365" selected>Last 12 months</option>
              </select>
            </div>
            <canvas id="revChart" height="120"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="pad">
            <div class="card-title">Top Products</div>
            <canvas id="topChart" height="120"></canvas>
          </div>
        </div>
      </section>

      <!-- Orders -->
      <section id="view-orders" class="view">
        <h2 class="pad">My Orders</h2>
        <div id="ordersList" class="stack"></div>
      </section>

      <!-- Cart page -->
      <section id="view-cart" class="view">
        <div class="card">
          <div class="pad">
            <div class="row between">
              <h3 class="card-title">Your Cart</h3>
              <button class="btn-soft" onclick="switchView('shop')">‚Üê Continue shopping</button>
            </div>

            <div id="cartPageList" class="stack"></div>

            <div class="row between" style="margin-top:1rem;align-items:flex-end">
              <div>
                <div class="small">Promo (optional)</div>
                <div class="row" style="gap:.5rem;">
                  <input id="cartPromo" class="input" placeholder="Promo code" />
                  <button id="applyCartPromo" class="btn-mini">Apply</button>
                </div>
              </div>
              <div style="text-align:right">
                <div class="small">Subtotal</div>
                <div id="cartSubtotal" class="price">$0.00</div>
                <div class="small">Estimated delivery</div>
                <div id="cartShip" class="price">$0.00</div>
                <div class="strong" style="margin-top:.4rem">Total</div>
                <div id="cartTotal" class="price" style="font-size:1.35rem">$0.00</div>
                <div class="row" style="gap:.5rem;margin-top:.6rem">
                  <select id="cartFulfill" class="input">
                    <option value="delivery">Delivery</option>
                    <option value="pickup">Store pickup</option>
                  </select>
                  <button id="btnCheckout" class="btn">Checkout</button>
                </div>
              </div>
            </div>

            <!-- PayPal buttons render here when clicking Checkout -->
            <div id="paypal-button-container" style="margin-top:1rem"></div>

            <!-- Delivery / Pickup details -->
            <div class="deliver-box">
              <div class="strong">Delivery Options</div>
              <label class="radio"><input type="radio" name="dopt" value="delivery" checked />Delivery</label>
              <div id="deliveryFields" class="stack">
                <input id="addrLine" class="input" placeholder="Address line" />
                <div class="row">
                  <input id="addrCity" class="input" placeholder="City" />
                  <input id="addrZip" class="input" placeholder="ZIP" />
                </div>
                <input id="addrPhone" class="input" placeholder="Phone" />
              </div>
              <label class="radio"><input type="radio" name="dopt" value="pickup" />Store pickup</label>
              <div id="pickupFields" class="stack" style="display:none">
                <select id="pickupStore" class="input">
                  <option>Downtown</option>
                  <option>Yangon Central</option>
                </select>
                <p class="small">We‚Äôll notify when ready.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- About -->
      <section id="view-about" class="view">
        <h2 class="pad">About ShweShop</h2>
        <p class="pad">Demo app built with Firebase + PayPal.</p>
      </section>
    </main>

    <!-- Product Modal -->
    <dialog id="productModal" class="modal">
      <div class="modal-body">
        <button class="icon-btn modal-close" data-close="productModal">‚úï</button>
        <div class="product-detail">
          <div class="pd-media">
            <button id="pdPrev" class="icon-btn pd-nav">‚ü®</button>
            <img id="pdImg" alt="" />
            <button id="pdNext" class="icon-btn pd-nav">‚ü©</button>
            <div id="pdThumbs" class="thumbs"></div>
          </div>
          <div class="pd-info">
            <h3 id="pdTitle"></h3>
            <p id="pdPrice" class="price"></p>
            <p id="pdDesc" class="desc"></p>
            <ul id="pdSpecs" class="disc small"></ul>
            <div class="info-box small">
              <div>üöö Shipping: 2‚Äì5 days (standard)</div>
              <div>‚Ü©Ô∏è Returns: 30-day return policy</div>
            </div>
            <div class="row">
              <label class="lbl">Qty</label>
              <input id="pdQty" class="input" type="number" min="1" value="1" />
            </div>
            <div class="row">
              <button id="pdAdd" class="btn">Add to Cart</button>
              <button class="btn btn-soft" data-close="productModal">Close</button>
            </div>
          </div>
        </div>
        <div class="related">
          <h4>Customers also viewed</h4>
          <div id="relatedGrid" class="related-grid"></div>
        </div>
      </div>
    </dialog>

    <!-- Membership Modal -->
    <dialog id="memberModal" class="modal">
      <div class="modal-body">
        <button class="close" data-close="memberModal" aria-label="Close">‚úï</button>
        <h3 class="card-title">Membership</h3>
        <p class="modal-desc">Create an account and choose a plan. Cashback applies to every order for one year.</p>
        <div class="stack" style="margin:1rem 0">
          <label class="radio"><input type="radio" name="mplan" value="basic" checked />
            <span>Basic ‚Äî <b>2% cashback</b> ‚Äî <i>$9/year</i></span></label>
          <label class="radio"><input type="radio" name="mplan" value="plus" />
            <span>Plus ‚Äî <b>3% cashback</b> ‚Äî <i>$19/year</i></span></label>
          <label class="radio"><input type="radio" name="mplan" value="pro" />
            <span>Pro ‚Äî <b>5% cashback</b> ‚Äî <i>$39/year</i></span></label>
        </div>
        <div class="row between" style="margin:.6rem 0">
          <label class="row" style="gap:.4rem;align-items:center">
            <input type="checkbox" id="autoRenew" /> <span>Auto-renew yearly</span>
          </label>
          <select id="payMethod" class="input" style="max-width:180px">
            <option value="paypal">PayPal</option>
            <option value="kbz">KBZ Pay</option>
            <option value="cbpay">CB Pay</option>
            <option value="ayar">Ayar Pay</option>
          </select>
        </div>
        <button id="buyMembership" class="btn" style="width:100%">Continue</button>
      </div>
    </dialog>

    <!-- Auth Modal -->
    <dialog id="authModal" class="modal">
      <div class="modal-body" style="max-width:480px">
        <button class="icon-btn modal-close" data-close="authModal">‚úï</button>
        <h3 class="card-title">Welcome back</h3>
        <p class="modal-desc">Sign in with email or continue with Google.</p>
        <div class="stack" style="margin:.75rem 0">
          <input id="email" class="input" type="email" placeholder="Email" />
          <input id="password" class="input" type="password" placeholder="Password" />
          <button id="btnEmailSignIn" class="btn">Sign in</button>
          <div class="row between small">
            <button id="btnCreate" class="btn-soft">Create account</button>
            <button id="btnForgot" class="btn-soft">Forgot password</button>
          </div>
          <hr />
          <button id="btnGoogle" class="btn btn-outline">Continue with Google</button>
        </div>
      </div>
    </dialog>
  </body>
</html>